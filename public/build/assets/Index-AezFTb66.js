import{c as Z,r as ee,a as ae,j as a}from"./app-BqBTxJm9.js";import{B as R}from"./app-logo-icon-DeL0VH88.js";import{I as H}from"./input-C3wYJFta.js";import{A as se}from"./app-layout-BOomczsQ.js";/* empty css            */import"./index-DCK0jGfk.js";import"./index-VGtFTOCT.js";import"./index-C4J_hXM0.js";function fe(i){const e=Z.c(57),{siswa:O,kelas:v}=i,q=O===void 0?[]:O;let S;e[0]!==v?(S=v===void 0?[]:v,e[0]=v,e[1]=S):S=e[1];const $=S,[w,U]=ee.useState(null);let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y={nama_siswa:"",alamat:"",tanggal_lahir:"",kelas_id:""},e[2]=y):y=e[2];const{data:t,setData:l,post:D,put:T,delete:G,reset:C}=ae(y);let A;e[3]!==w||e[4]!==D||e[5]!==T||e[6]!==C?(A=s=>{s.preventDefault(),w?T(`/siswa/${w}`,{onSuccess:()=>{C(),U(null)}}):D("/siswa",{onSuccess:()=>C()})},e[3]=w,e[4]=D,e[5]=T,e[6]=C,e[7]=A):A=e[7];const z=A,J=s=>{U(s.id),l("nama_siswa",s.nama_siswa),l("alamat",s.alamat),l("tanggal_lahir",s.tanggal_lahir),l("kelas_id",String(s.kelas_id))},M=q.reduce(te,{});let E;e[8]===Symbol.for("react.memo_cache_sentinel")?(E=[{title:"Siswa",href:"/siswa"}],e[8]=E):E=e[8];const B=E,F=se,Q="space-y-6 p-6";let r;e[9]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx("h1",{className:"text-2xl font-semibold",children:"Data Siswa"}),e[9]=r):r=e[9];let c;e[10]!==l?(c=s=>l("nama_siswa",s.target.value),e[10]=l,e[11]=c):c=e[11];let d;e[12]!==t.nama_siswa||e[13]!==c?(d=a.jsx(H,{placeholder:"Nama Siswa",value:t.nama_siswa,onChange:c}),e[12]=t.nama_siswa,e[13]=c,e[14]=d):d=e[14];let o;e[15]!==l?(o=s=>l("alamat",s.target.value),e[15]=l,e[16]=o):o=e[16];let m;e[17]!==t.alamat||e[18]!==o?(m=a.jsx(H,{placeholder:"Alamat",value:t.alamat,onChange:o}),e[17]=t.alamat,e[18]=o,e[19]=m):m=e[19];let h;e[20]!==l?(h=s=>l("tanggal_lahir",s.target.value),e[20]=l,e[21]=h):h=e[21];let x;e[22]!==t.tanggal_lahir||e[23]!==h?(x=a.jsx(H,{type:"date",value:t.tanggal_lahir,onChange:h}),e[22]=t.tanggal_lahir,e[23]=h,e[24]=x):x=e[24];const V=t.kelas_id;let f;e[25]!==l?(f=s=>l("kelas_id",s.target.value),e[25]=l,e[26]=f):f=e[26];let I;e[27]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx("option",{value:"",children:"Pilih Kelas"}),e[27]=I):I=e[27];let p;e[28]!==$?(p=$.map(le),e[28]=$,e[29]=p):p=e[29];let u;e[30]!==t.kelas_id||e[31]!==f||e[32]!==p?(u=a.jsxs("select",{className:"rounded-xl border bg-black px-2",value:V,onChange:f,children:[I,p]}),e[30]=t.kelas_id,e[31]=f,e[32]=p,e[33]=u):u=e[33];const L=w?"Update":"Tambah";let j;e[34]!==L?(j=a.jsx(R,{type:"submit",children:L}),e[34]=L,e[35]=j):j=e[35];let _;e[36]!==z||e[37]!==d||e[38]!==m||e[39]!==x||e[40]!==u||e[41]!==j?(_=a.jsxs("form",{onSubmit:z,className:"grid max-w-4xl grid-cols-5 gap-2",children:[d,m,x,u,j]}),e[36]=z,e[37]=d,e[38]=m,e[39]=x,e[40]=u,e[41]=j,e[42]=_):_=e[42];const W="relative flex-1 overflow-x-auto rounded-xl border border-sidebar-border/70 p-4",X="w-full border-collapse";let g;e[43]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"p-2 text-left",children:"No"}),a.jsx("th",{className:"p-2 text-left",children:"Nama"}),a.jsx("th",{className:"p-2 text-left",children:"Alamat"}),a.jsx("th",{className:"p-2 text-left",children:"Tgl Lahir"}),a.jsx("th",{className:"p-2 text-left",children:"Kelas"}),a.jsx("th",{className:"p-2 text-left",children:"Aksi"})]})}),e[43]=g):g=e[43];const P=Object.values(M).map((s,ie)=>a.jsxs(a.Fragment,{children:[a.jsx("tr",{className:"bg-slate-900 font-semibold",children:a.jsxs("td",{colSpan:6,className:"p-3",children:["Kelas:"," ",s[0].kelas.nama_kelas]})},`kelas-${s[0].kelas.id}`),s.map((n,Y)=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-2",children:Y+1}),a.jsx("td",{className:"p-2",children:n.nama_siswa}),a.jsx("td",{className:"p-2",children:n.alamat}),a.jsx("td",{className:"p-2",children:n.tanggal_lahir.slice(0,10)}),a.jsx("td",{className:"p-2",children:n.kelas.nama_kelas}),a.jsxs("td",{className:"space-x-2 p-2",children:[a.jsx(R,{size:"sm",onClick:()=>J(n),children:"Edit"}),a.jsx(R,{size:"sm",variant:"destructive",onClick:()=>G(`/siswa/${n.id}`),children:"Hapus"})]})]},n.id))]}));let b;e[44]!==P?(b=a.jsx("tbody",{children:P}),e[44]=P,e[45]=b):b=e[45];let N;e[46]!==g||e[47]!==b?(N=a.jsx("div",{className:W,children:a.jsxs("table",{className:X,children:[g,b]})}),e[46]=g,e[47]=b,e[48]=N):N=e[48];let k;e[49]!==_||e[50]!==N||e[51]!==r?(k=a.jsxs("div",{className:Q,children:[r,_,N]}),e[49]=_,e[50]=N,e[51]=r,e[52]=k):k=e[52];let K;return e[53]!==F||e[54]!==B||e[55]!==k?(K=a.jsx(F,{breadcrumbs:B,children:k}),e[53]=F,e[54]=B,e[55]=k,e[56]=K):K=e[56],K}function le(i){return a.jsx("option",{value:i.id,children:i.nama_kelas},i.id)}function te(i,e){return e.kelas&&(i[e.kelas.id]||(i[e.kelas.id]=[]),i[e.kelas.id].push(e)),i}export{fe as default};
